webpackJsonp([0],{"/H0L":function(t,e,a){"use strict";var s={data:function(){return{page:1}},props:{total:Number},methods:{handleSizeChange:function(){this.$emit("handleToPage",this.page)},handleCurrentChange:function(){this.$emit("handleToPage",this.page)}},mounted:function(){}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pick-data"},[a("el-pagination",{attrs:{"current-page":t.page,"page-size":10,layout:"prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.page=e}}})],1)},staticRenderFns:[]};var l=a("VU/8")(s,i,!1,function(t){a("NXWi")},"data-v-10843f61",null);e.a=l.exports},"5A2E":function(t,e){},"8+rn":function(t,e){},"B/+6":function(t,e){},NXWi:function(t,e){},aQ3x:function(t,e){},g0mm:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),i=a.n(s),l=a("NYxO"),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-bars"},[a("div",{staticClass:"search-box"},[a("div",{staticClass:"item"},[a("div",{staticClass:"task-order items"},[a("span",{staticClass:"label"},[t._v("任务单号")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入任务单号"},model:{value:t.bidTaskId,callback:function(e){t.bidTaskId="string"==typeof e?e.trim():e},expression:"bidTaskId"}})],1),t._v(" "),a("div",{staticClass:"task-start items"},[a("span",{staticClass:"label"},[t._v("起始地")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入起始地"},model:{value:t.pickArea,callback:function(e){t.pickArea="string"==typeof e?e.trim():e},expression:"pickArea"}})],1),t._v(" "),a("div",{staticClass:"task-end items"},[a("span",{staticClass:"label"},[t._v("目的地")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入目的地"},model:{value:t.deliverArea,callback:function(e){t.deliverArea="string"==typeof e?e.trim():e},expression:"deliverArea"}})],1),t._v(" "),a("div",{staticClass:"task-type items"},[a("span",{staticClass:"label"},[t._v("类型")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择任务单类型",clearable:""},model:{value:t.taskType,callback:function(e){t.taskType=e},expression:"taskType"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.typeValue,attrs:{label:t.typeLabel,value:t.typeValue}})}))],1),t._v(" "),a("div",{staticClass:"task-weight items final"},[a("span",{staticClass:"label"},[t._v("总重量")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择任务单总重量",clearable:""},model:{value:t.totalWeight,callback:function(e){t.totalWeight=e},expression:"totalWeight"}},t._l(t.weightOptions,function(t){return a("el-option",{key:t.weightValue,attrs:{label:t.weightLabel,value:t.weightValue}})}))],1)]),t._v(" "),a("div",{staticClass:"item second"},[a("div",{staticClass:"task-volume items"},[a("span",{staticClass:"label"},[t._v("总体积")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择任务单总体积",clearable:""},model:{value:t.totalVolume,callback:function(e){t.totalVolume=e},expression:"totalVolume"}},t._l(t.volumeOptions,function(t){return a("el-option",{key:t.volumeValue,attrs:{label:t.volumeLabel,value:t.volumeValue}})}))],1),t._v(" "),a("div",{staticClass:"task-myprice items"},[a("span",{staticClass:"label"},[t._v("状态")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择任务单状态",clearable:""},model:{value:t.bidStatus,callback:function(e){t.bidStatus=e},expression:"bidStatus"}},t._l(t.stateOptions,function(t){return a("el-option",{key:t.stateValue,attrs:{label:t.stateLabel,value:t.stateValue}})}))],1),t._v(" "),a("div",{staticClass:"items"},[a("div",{staticClass:"btn"},[a("el-button",{staticClass:"searchbtn",attrs:{size:"mini"},on:{click:t.handleSearch}},[t._v("查询")])],1),t._v(" "),a("div",{staticClass:"btn"},[a("el-button",{staticClass:"cancelbtn",attrs:{size:"mini"},on:{click:t.handleClear}},[t._v("清空")])],1)]),t._v(" "),a("div",{staticClass:"items"}),t._v(" "),a("div",{staticClass:"items"})])])])},staticRenderFns:[]};var o=a("VU/8")({data:function(){return{bidTaskId:"",pickArea:"",deliverArea:"",typeOptions:[{typeValue:"0",typeLabel:"冷藏品"},{typeValue:"1",typeLabel:"普通"}],taskType:"",volumeOptions:[{volumeValue:"1",volumeLabel:"≤10m³"},{volumeValue:"2",volumeLabel:">10m³ ≤100m³"},{volumeValue:"3",volumeLabel:"其他"}],totalVolume:"",weightOptions:[{weightValue:"1",weightLabel:"<10kg"},{weightValue:"2",weightLabel:"≥10kg ≤100kg"},{weightValue:"3",weightLabel:"其他"}],totalWeight:"",stateOptions:[{stateValue:"2",stateLabel:"竞拍成功"},{stateValue:"5",stateLabel:"配送中"}],bidStatus:""}},methods:{handleSearch:function(){var t={bidTaskId:this.bidTaskId,pickArea:this.pickArea,deliverArea:this.deliverArea,taskType:this.taskType,totalVolume:this.totalVolume,totalWeight:this.totalWeight,bidStatus:this.bidStatus};this.$emit("searchCurrent",t)},handleClear:function(){this.bidTaskId="",this.pickArea="",this.deliverArea="",this.taskType="",this.totalVolume="",this.totalWeight="",this.totalWeight="",this.bidStatus="",this.handleSearch()}}},r,!1,function(t){a("hOQU")},"data-v-65904478",null).exports,n={data:function(){return{currentSuccessRow:"",SuccessHeader:[{prop:"bidTaskNum",label:"任务单号",width:"180",tooltip:!1},{prop:"releaseTime",label:"任务单时间",width:"180",tooltip:!1},{prop:"pickArea",label:"起始地",width:"160",tooltip:!0},{prop:"deliverArea",label:"目的地",width:"160",tooltip:!0},{prop:"taskType",label:"类型",width:"120",tooltip:!1},{prop:"serviceTime",label:"时效(h)",width:"120",tooltip:!1},{prop:"totalQuantity",label:"件数",width:"120",tooltip:!1},{prop:"totalWeight",label:"总重量(kg)",width:"140",tooltip:!1},{prop:"totalVolume",label:"总体积(m³)",width:"140",tooltip:!1},{prop:"transactionPrice",label:"已拍价(元)",width:"140",tooltip:!1},{prop:"bidStatus",label:"任务单状态",width:"140",tooltip:!1}]}},props:{currentdata:Array},methods:{doChangeState:function(){var t=this;if(""===this.currentSuccessRow)return this.$message({message:"请单击选中你要操作的任务单单",type:"warning"}),!1;"竞拍成功"===this.currentSuccessRow.bidStatus&&this.$confirm("您将此任务单的状态改为配送中, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var e=0;e<t.currentdata.length;e++)t.currentdata[e].bidTaskId===t.currentSuccessRow.bidTaskId&&t.$emit("handleToChangeState",5,t.currentSuccessRow.bidTaskId,"empty")}).catch(function(){t.$message({type:"info",message:"已取消状态修改"})}),"配送中"===this.currentSuccessRow.bidStatus&&this.$confirm("您将此任务单的状态改为运输完成, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var e=0;e<t.currentdata.length;e++)if(t.currentdata[e].bidTaskId===t.currentSuccessRow.bidTaskId){var a=new Date;t.$emit("handleToChangeState",4,t.currentSuccessRow.bidTaskId,a)}t.$message({type:"success",message:"此任务单的状态已改为配送完成!"})}).catch(function(){t.$message({type:"info",message:"已取消状态修改"})})},successCurrentSelect:function(t){document.getElementsByClassName("changebtn")[0].style.backgroundColor="#105faa",document.getElementsByClassName("changebtn")[0].style.borderColor="#105faa",this.currentSuccessRow=t},handleCurrentChange:function(t){this.$emit("handleToDetail",t.bidTaskId,t.bidTaskNum)}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"success-bar"},[a("div",{staticClass:"btn"},[a("el-button",{staticClass:"changebtn",attrs:{size:"mini",type:"primary"},on:{click:t.doChangeState}},[t._v("运输")])],1),t._v(" "),a("el-table",{staticClass:"success_table",attrs:{"max-height":"385","empty-text":" ",data:t.currentdata,"highlight-current-row":""},on:{"row-dblclick":t.handleCurrentChange,"current-change":t.successCurrentSelect}},t._l(t.SuccessHeader,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,width:t.width,"show-overflow-tooltip":t.tooltip}})}))],1)},staticRenderFns:[]};var c=a("VU/8")(n,d,!1,function(t){a("aQ3x")},"data-v-7be4e7d8",null).exports,u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-bar"},[a("div",{staticClass:"search-box"},[a("div",{staticClass:"task-order item"},[a("span",{staticClass:"label"},[t._v("任务单号")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入任务单号"},model:{value:t.bidTaskId,callback:function(e){t.bidTaskId="string"==typeof e?e.trim():e},expression:"bidTaskId"}})],1),t._v(" "),a("div",{staticClass:"task-type item data"},[a("span",{staticClass:"label"},[t._v("时间")]),t._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"请选择开始时间"},model:{value:t.releaseTime,callback:function(e){t.releaseTime=e},expression:"releaseTime"}}),t._v(" "),a("span",[t._v(" ")]),t._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"请选择结束时间"},model:{value:t.sealedDiskTime,callback:function(e){t.sealedDiskTime=e},expression:"sealedDiskTime"}})],1),t._v(" "),a("div",{staticClass:"task-type item"},[a("span",{staticClass:"label"},[t._v("状态")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择任务单状态",clearable:""},model:{value:t.bidStatus,callback:function(e){t.bidStatus=e},expression:"bidStatus"}},t._l(t.stateOptions,function(t){return a("el-option",{key:t.stateValue,attrs:{label:t.stateLabel,value:t.stateValue}})}))],1),t._v(" "),a("div",{staticClass:"task-type item final"},[a("span",{staticClass:"label"},[t._v("类型")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择任务单类型",clearable:""},model:{value:t.taskType,callback:function(e){t.taskType=e},expression:"taskType"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.typeValue,attrs:{label:t.typeLabel,value:t.typeValue}})}))],1),t._v(" "),a("div",{staticClass:"btn"},[a("el-button",{staticClass:"searchbtn",attrs:{size:"mini"},on:{click:t.handleSearch}},[t._v("查询")])],1)])])},staticRenderFns:[]};var h=a("VU/8")({data:function(){return{bidTaskId:"",typeOptions:[{typeValue:"0",typeLabel:"冷藏品"},{typeValue:"1",typeLabel:"普通"}],taskType:"",sealedDiskTime:"",releaseTime:"",stateOptions:[{stateValue:"-1",stateLabel:"竞拍失败"},{stateValue:"4",stateLabel:"配送完成"}],bidStatus:""}},methods:{handleSearch:function(){var t={bidTaskId:this.bidTaskId,taskType:this.taskType,bidStatus:this.bidStatus,releaseTime:this.releaseTime,sealedDiskTime:this.sealedDiskTime};this.$emit("searchHistory",t)}}},u,!1,function(t){a("B/+6")},"data-v-2441f5ae",null).exports,p={data:function(){return{HistoryHeader:[{prop:"bidTaskNum",label:"任务单号",width:"180",tooltip:!1},{prop:"releaseTime",label:"任务单时间",width:"180",tooltip:!1},{prop:"pickArea",label:"起始地",width:"160",tooltip:!0},{prop:"deliverArea",label:"目的地",width:"160",tooltip:!0},{prop:"taskType",label:"类型",width:"160",tooltip:!1},{prop:"serviceTime",label:"送达时间",width:"180",tooltip:!1},{prop:"totalQuantity",label:"件数",width:"120",tooltip:!1},{prop:"totalWeight",label:"总重量(kg)",width:"140",tooltip:!1},{prop:"totalVolume",label:"总体积(m³)",width:"140",tooltip:!1},{prop:"transactionPrice",label:"已拍价(元)",width:"140",tooltip:!1},{prop:"bidStatus",label:"任务单状态",width:"140",tooltip:!1}]}},props:{historydata:Array},methods:{handleCurrentChange:function(t){if("竞拍失败"===t.bidStatus)return this.$message({message:"竞价失败任务单不可查阅详情",type:"warning"}),!1;this.$emit("handleToDetail",t.bidTaskId,t.bidTaskNum)}}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"history-bar"},[e("el-table",{staticClass:"history_table",attrs:{"max-height":"385","empty-text":" ",data:this.historydata,"highlight-current-row":""},on:{"row-dblclick":this.handleCurrentChange}},this._l(this.HistoryHeader,function(t,a){return e("el-table-column",{key:a,attrs:{prop:t.prop,label:t.label,width:t.width,"show-overflow-tooltip":t.tooltip}})}))],1)},staticRenderFns:[]},v=a("VU/8")(p,b,!1,null,null,null).exports,m={data:function(){return{DetailHeader:[{prop:"orderNum",label:"商品编号",width:"180",tooltip:!1},{prop:"goodsType",label:"商品名称",width:"160",tooltip:!0},{prop:"consignor",label:"寄件人",width:"160",tooltip:!0},{prop:"startArea",label:"寄件人地址",width:"160",tooltip:!0},{prop:"phoneNumConsignor",label:"寄件人电话",width:"160",tooltip:!0},{prop:"transportType",label:"类型",width:"120",tooltip:!1},{prop:"receivingTime",label:"时效(h)",width:"120",tooltip:!1},{prop:"goodsCount",label:"件数",width:"120",tooltip:!1},{prop:"weight",label:"总重量(kg)",width:"140",tooltip:!1},{prop:"volume",label:"总体积(m³)",width:"140",sortable:!0,tooltip:!1},{prop:"consignee",label:"收件人",width:"140",tooltip:!1},{prop:"endArea",label:"收件人地址",width:"160",tooltip:!0},{prop:"phoneNumConsignee",label:"收件人电话",width:"140",tooltip:!1},{prop:"remark",label:"备注",width:"160",tooltip:!0}]}},props:{detailOrder:String,detailNum:Number,detailData:Array},computed:{},methods:{},mounted:function(){}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail-bar"},[a("div",{staticClass:"detail-title"},[a("div",{staticClass:"detail-leader"},[t._v("当前位置： 任务单 / 详情")]),t._v(" "),a("div",{staticClass:"detail-total"},[t._v("\n      任务单号:\n      "),a("span",{staticClass:"detail-num"},[t._v(t._s(t.detailOrder))]),t._v("\n        共:\n      "),a("span",[t._v(t._s(t.detailNum))]),t._v("\n        条明细\n  ")])]),t._v(" "),a("el-table",{staticClass:"detail_table",attrs:{"max-height":"385","empty-text":" ",data:t.detailData}},t._l(t.DetailHeader,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,width:t.width,"show-overflow-tooltip":t.tooltip}})}))],1)},staticRenderFns:[]};var k=a("VU/8")(m,g,!1,function(t){a("5A2E")},"data-v-6c3da06a",null).exports,f=a("/H0L"),y={name:"result",data:function(){return{pageCode:1,currentCondition:{bidTaskId:"",pickArea:"",deliverArea:"",taskType:"",totalVolume:"",totalWeight:"",bidStatus:""},historyCondition:{bidTaskId:"",releaseTime:"",sealedDiskTime:"",taskType:"",bidStatus:""},currenttotal:0,historytotal:0,detailOrder:"",detailNum:0,detailData:[],currentdata:[],historydata:[],activeName:"success",flag:!0}},props:{refreshdata:Boolean},components:{SuccessSearch:o,SuccessBar:c,HistorySearch:h,HistoryBar:v,DetailBar:k,PickData:f.a},watch:{refreshdata:"refreshData",activeName:function(t,e){this.historyTaskAjax(this.userId,this.pageCode,this.flag,this.historyCondition)}},computed:i()({},Object(l.d)({userId:"userId"})),methods:{showDetail:function(t,e){this.activeName="detail",this.detailOrder=e,this.detailAjax(t)},changeCurrentPage:function(t){this.pageCode=t,this.currentTaskAjax(this.userId,this.pageCode,this.currentCondition)},changeHistoryPage:function(t){this.pageCode=t,this.historyTaskAjax(this.userId,this.pageCode,!0,this.historyCondition)},searchCurrent:function(t){this.currentCondition=t,this.currentTaskAjax(this.userId,this.pageCode,this.currentCondition)},searchHistory:function(t){this.historyCondition=t,this.historyTaskAjax(this.userId,this.pageCode,!0,this.historyCondition)},handleToChangeState:function(t,e,a){var s=this,i={bidTaskId:e,bidStatus:t,currenttime:a};this.$get("/api/auctionTask/updateTaskStatus",i).then(function(t){if(t)for(var a=0;a<s.currentdata.length;a++)s.currentdata[a].bidTaskId===e&&("竞拍成功"===s.currentdata[a].bidStatus?(s.currentdata[a].bidStatus="配送中",s.$message({type:"success",message:"此任务单的状态已改为配送中!"})):(s.currentdata[a].bidStatus="配送完成",s.currentdata.splice(a,1),0===s.currentdata.length&&s.biddingToEmpty(),s.$message({type:"success",message:"此任务单的状态已改为配送完成!"})))})},currentTaskAjax:function(t,e,a){var s=this,i={userId:t,pageCode:e,bidTaskId:a.bidTaskId,pickArea:a.pickArea,deliverArea:a.deliverArea,taskType:a.taskType,totalVolume:a.totalVolume,totalWeight:a.totalWeight,bidStatus:a.bidStatus};this.$get("/api/auctionTask/findSuccessByPage",i).then(function(t){if(void 0===t.rows)return!1;s.currentdata=t.rows,s.currenttotal=t.total})},historyTaskAjax:function(t,e,a,s){var i=this;if("history"===this.activeName&&a){var l={userId:t,pageCode:e,bidTaskId:s.bidTaskId,releaseTime:s.releaseTime,sealedDiskTime:s.sealedDiskTime,taskType:s.taskType,bidStatus:s.bidStatus};this.$get("/api/auctionTask/findHistoryByPage",l).then(function(t){if(void 0===t.rows)return!1;i.historydata=t.rows;for(var e=0;e<i.historydata.length;e++)i.historydata[e].userId===i.userId&&(i.historydata[e].bidStatus="配送完成"),i.historydata[e].userId!==i.userId&&(i.historydata[e].bidStatus="竞拍失败",i.historydata[e].serviceTime="-");i.historytotal=t.total}),this.flag=!1}},detailAjax:function(t){var e=this;this.$get("/api/auctionTask/getResultDetails",{bidTaskId:t}).then(function(t){if(void 0===t)return!1;e.detailData=t,e.detailNum=t.length})},refreshData:function(){if(!this.refreshdata)return!1;"success"===this.activeName?this.currentTaskAjax(this.userId,this.pageCode,this.currentCondition):"history"===this.activeName?this.historyTaskAjax(this.userId,this.pageCode,!0,this.historyCondition):console.log("详情页面不刷新"),this.$emit("refreshed")}},mounted:function(){"未登录"===this.userId&&this.$router.push({path:"/login"}),this.currentTaskAjax(this.userId,this.pageCode,this.currentCondition)}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"result"},[t._m(0),t._v(" "),a("div",{staticClass:"wrap"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"当前任务单",name:"success"}},[a("success-search",{on:{searchCurrent:t.searchCurrent}}),t._v(" "),a("success-bar",{attrs:{currentdata:t.currentdata},on:{handleToDetail:t.showDetail,handleToChangeState:t.handleToChangeState}}),t._v(" "),a("pick-data",{attrs:{total:t.currenttotal},on:{handleToPage:t.changeCurrentPage}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"历史任务单",name:"history"}},[a("history-search",{on:{searchHistory:t.searchHistory}}),t._v(" "),a("history-bar",{attrs:{historydata:t.historydata},on:{handleToDetail:t.showDetail}}),t._v(" "),a("pick-data",{attrs:{total:t.historytotal},on:{handleToPage:t.changeHistoryPage}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"任务单详情",name:"detail",disabled:""}},[a("detail-bar",{attrs:{detailOrder:t.detailOrder,detailNum:t.detailNum,detailData:t.detailData}})],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[this._v("\n    当前页面:\n    "),e("span",[this._v("竞价结果查询")])])}]};var T=a("VU/8")(y,C,!1,function(t){a("8+rn")},"data-v-47e53286",null);e.default=T.exports},hOQU:function(t,e){}});