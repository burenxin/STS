webpackJsonp([1],{"2XEt":function(e,t){},ESBi:function(e,t){},"Q+fM":function(e,t){},YQQe:function(e,t){},Yo6u:function(e,t){},ZTF8:function(e,t){},qlor:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Dd8w"),d=i.n(a),l=i("NYxO"),s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"search-bars"},[i("div",{staticClass:"search-box"},[i("div",{staticClass:"item"},[i("div",{staticClass:"task-order items"},[i("span",{staticClass:"label"},[e._v("任务单号")]),e._v(" "),i("el-input",{attrs:{placeholder:"请输入任务单号"},model:{value:e.bidTaskId,callback:function(t){e.bidTaskId="string"==typeof t?t.trim():t},expression:"bidTaskId"}})],1),e._v(" "),i("div",{staticClass:"task-start items"},[i("span",{staticClass:"label"},[e._v("起始地")]),e._v(" "),i("el-input",{attrs:{placeholder:"请输入起始地"},model:{value:e.pickArea,callback:function(t){e.pickArea="string"==typeof t?t.trim():t},expression:"pickArea"}})],1),e._v(" "),i("div",{staticClass:"task-end items"},[i("span",{staticClass:"label"},[e._v("目的地")]),e._v(" "),i("el-input",{attrs:{placeholder:"请输入目的地"},model:{value:e.deliverArea,callback:function(t){e.deliverArea="string"==typeof t?t.trim():t},expression:"deliverArea"}})],1),e._v(" "),i("div",{staticClass:"task-type items"},[i("span",{staticClass:"label"},[e._v("类型")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择任务单类型",clearable:""},model:{value:e.taskType,callback:function(t){e.taskType=t},expression:"taskType"}},e._l(e.typeOptions,function(e){return i("el-option",{key:e.typevalue,attrs:{label:e.typelabel,value:e.typevalue}})}))],1),e._v(" "),i("div",{staticClass:"task-time items final"},[i("span",{staticClass:"label"},[e._v("时效")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择任务单时效",clearable:""},model:{value:e.serviceTime,callback:function(t){e.serviceTime=t},expression:"serviceTime"}},e._l(e.TimeOptions,function(e){return i("el-option",{key:e.timevalue,attrs:{label:e.timelabel,value:e.timevalue}})}))],1)]),e._v(" "),i("div",{staticClass:"item second"},[i("div",{staticClass:"task-weight items"},[i("span",{staticClass:"label"},[e._v("总重量")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择任务单总重量",clearable:""},model:{value:e.totalWeight,callback:function(t){e.totalWeight=t},expression:"totalWeight"}},e._l(e.WeightOptions,function(e){return i("el-option",{key:e.weightvalue,attrs:{label:e.weightlabel,value:e.weightvalue}})}))],1),e._v(" "),i("div",{staticClass:"task-volume items"},[i("span",{staticClass:"label"},[e._v("总体积")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择任务单总体积",clearable:""},model:{value:e.totalVolume,callback:function(t){e.totalVolume=t},expression:"totalVolume"}},e._l(e.VolumeOptions,function(e){return i("el-option",{key:e.volumevalue,attrs:{label:e.volumelabel,value:e.volumevalue}})}))],1),e._v(" "),i("div",{staticClass:"items"},[i("div",{staticClass:"btn"},[i("el-button",{staticClass:"searchbtn",attrs:{size:"mini"},on:{click:e.handleSearch}},[e._v("查询")])],1),e._v(" "),i("div",{staticClass:"btn"},[i("el-button",{staticClass:"cancelbtn",attrs:{size:"mini"},on:{click:e.handleClear}},[e._v("清空")])],1)]),e._v(" "),i("div",{staticClass:"items"}),e._v(" "),i("div",{staticClass:"items"})])])])},staticRenderFns:[]};var n=i("VU/8")({data:function(){return{bidTaskId:"",pickArea:"",deliverArea:"",typeOptions:[{typevalue:"0",typelabel:"冷藏品"},{typevalue:"1",typelabel:"普通"}],taskType:"",TimeOptions:[{timevalue:"0",timelabel:"≤72H"},{timevalue:"1",timelabel:">72H ≤120H"},{timevalue:"2",timelabel:"其他"}],serviceTime:"",VolumeOptions:[{volumevalue:"0",volumelabel:"≤10m³"},{volumevalue:"1",volumelabel:">10m³ ≤100m³"},{volumevalue:"2",volumelabel:"其他"}],totalVolume:"",WeightOptions:[{weightvalue:"0",weightlabel:"≤10kg"},{weightvalue:"1",weightlabel:">10kg ≤100kg"},{weightvalue:"2",weightlabel:"其他"}],totalWeight:""}},props:["activebar"],methods:{handleSearch:function(){var e={bidTaskId:this.bidTaskId,pickArea:this.pickArea,deliverArea:this.deliverArea,taskType:this.taskType,serviceTime:this.serviceTime,totalVolume:this.totalVolume,totalWeight:this.totalWeight};"bidding"===this.activebar?this.$emit("searchBidding",e):this.$emit("searchBidded",e)},handleClear:function(){this.bidTaskId="",this.pickArea="",this.deliverArea="",this.taskType="",this.serviceTime="",this.totalVolume="",this.totalWeight="",this.handleSearch()}}},s,!1,function(e){i("ZTF8")},"data-v-52ab574d",null).exports,o={data:function(){return{currentBiddingRow:"",biddingHeader:[{prop:"bidTaskNum",label:"任务单号",width:"180",sortable:!1,tooltip:!1},{prop:"releaseTime",label:"发布时间",width:"180",sortable:!1,tooltip:!1},{prop:"pickArea",label:"起始地",width:"160",sortable:!1,tooltip:!0},{prop:"deliverArea",label:"目的地",width:"160",sortable:!1,tooltip:!0},{prop:"taskType",label:"类型",width:"100",sortable:!1,tooltip:!1},{prop:"serviceTime",label:"时效",width:"180",sortable:!0,tooltip:!1},{prop:"totalQuantity",label:"件数",width:"120",sortable:!1,tooltip:!1},{prop:"totalWeight",label:"总重量(kg)",width:"140",sortable:!0,tooltip:!1},{prop:"totalVolume",label:"总体积(m³)",width:"140",sortable:!0,tooltip:!1},{prop:"proposedPrice",label:"参考价(元)",width:"120",sortable:!1,tooltip:!1}]}},props:{biddingdata:Array},methods:{tableCell:function(e){return 10===e.columnIndex?"color-red":""},doBidding:function(){var e=this;if(""===this.currentBiddingRow)return this.$message({message:"请单击选中你要操作的任务单",type:"warning"}),!1;this.$prompt("请输入您的报价（元）","欢迎您参与此订单的竞拍",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\+?[1-9][0-9]*$/,inputErrorMessage:"请输入大于0的整数"}).then(function(t){for(var i=t.value,a=0;a<e.biddingdata.length;a++)e.biddingdata[a].bidTaskId===e.currentBiddingRow.bidTaskId&&e.$emit("handleToDoBidding",i,e.currentBiddingRow.bidTaskId)}).catch(function(){e.$message({type:"info",message:"您已取消此单的报价"})})},biddingCurrentSelect:function(e){document.getElementsByClassName("biddingbtn")[0].style.backgroundColor="#105faa",document.getElementsByClassName("biddingbtn")[0].style.borderColor="#105faa",this.currentBiddingRow=e},handleCurrentChange:function(e){this.$emit("handleToDetail",e.bidTaskId,e.bidTaskNum)},TimeLeft:function(e){var t=e,i="",a="",d="";return t>=0?(i=Math.floor(t/60/60%24),a=Math.floor(t/60%60),d=Math.floor(t%60),t-=1,i<10&&(i="0"+i),a<10&&(a="0"+a),d<10&&(d="0"+d),i+":"+a+":"+d):"zero"}},mounted:function(){var e=this;void 0!==this.biddingdata&&setInterval(function(){for(var t=0;t<e.biddingdata.length;t++)e.biddingdata[t].sealedDiskTime=parseInt(e.biddingdata[t].sealedDiskTime),"zero"!==e.TimeLeft(e.biddingdata[t].sealedDiskTime)?(e.$set(e.biddingdata[t],"timeleft",e.TimeLeft(e.biddingdata[t].sealedDiskTime)),e.biddingdata[t].sealedDiskTime--):(e.biddingdata.splice(t,1),0===e.biddingdata.length&&e.$emit("handleToEmpty","true"))},1e3)}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bidding-bar"},[i("div",{staticClass:"btn"},[i("el-button",{staticClass:"biddingbtn",attrs:{size:"mini",type:"primary"},on:{click:e.doBidding}},[e._v("竞拍")])],1),e._v(" "),i("el-table",{staticClass:"bidding_table",attrs:{"cell-class-name":e.tableCell,"max-height":"385","empty-text":" ",data:e.biddingdata,"highlight-current-row":"","default-sort":{prop:"releaseTime",order:"ascending"}},on:{"row-dblclick":e.handleCurrentChange,"current-change":e.biddingCurrentSelect}},[e._l(e.biddingHeader,function(e,t){return i("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label,width:e.width,sortable:e.sortable,"show-overflow-tooltip":e.tooltip}})}),e._v(" "),i("el-table-column",{attrs:{label:"距竞拍结束还剩",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"el-icon-time"}),e._v(" "),i("span",[e._v(e._s(t.row.timeleft))])]}}])})],2)],1)},staticRenderFns:[]};var c=i("VU/8")(o,r,!1,function(e){i("Yo6u")},"data-v-54f1738c",null).exports,h={data:function(){return{currentBiddedRow:"",BiddedHeader:[{prop:"bidTaskNum",label:"任务单号",width:"180",tooltip:!1},{prop:"releaseTime",label:"发布时间",width:"180",tooltip:!1},{prop:"pickArea",label:"起始地",width:"160",tooltip:!0},{prop:"deliverArea",label:"目的地",width:"160",tooltip:!0},{prop:"taskType",label:"类型",width:"100",tooltip:!1},{prop:"serviceTime",label:"时效(h)",width:"110",tooltip:!1},{prop:"totalQuantity",label:"件数",width:"100",tooltip:!1},{prop:"totalWeight",label:"总重量(kg)",width:"110",tooltip:!1},{prop:"totalVolume",label:"总体积(m³)",width:"110",tooltip:!1},{prop:"proposedPrice",label:"参考价(元)",width:"110",tooltip:!1},{prop:"quotedPrice",label:"已拍价(元)",width:"110",tooltip:!1}]}},props:{biddeddata:Array},methods:{tableCell:function(e){return 11===e.columnIndex?"color-red":""},changePrice:function(){var e=this;if(""===this.currentBiddedRow)return this.$message({message:"请单击选中你要操作的任务单单",type:"warning"}),!1;this.$prompt("请输入您的报价（元）","竞拍价格修改",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\+?[1-9][0-9]*$/,inputErrorMessage:"请输入大于0的整数"}).then(function(t){for(var i=t.value,a=0;a<e.biddeddata.length;a++)e.biddeddata[a].bidTaskId===e.currentBiddedRow.bidTaskId&&e.$emit("handleTochangePrice",i,e.currentBiddedRow.bidTaskId)}).catch(function(){e.$message({type:"info",message:"您已取消此单的报价"})})},exit:function(){var e=this;if(""===this.currentBiddedRow)return this.$message({message:"请单击选中你要操作的任务单单",type:"warning"}),!1;this.$confirm("你要取消此订单的竞拍, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t=0;t<e.biddeddata.length;t++)e.biddeddata[t].bidTaskId===e.currentBiddedRow.bidTaskId&&e.$emit("handleToExit",e.currentBiddedRow.bidTaskId)}).catch(function(){e.$message({type:"info",message:"消此订单竞拍失败"})})},handleCurrentChange:function(e){this.$emit("handleToDetail",e.bidTaskId,e.bidTaskNum)},biddedCurrentSelect:function(e){document.getElementsByClassName("changebtn")[0].style.backgroundColor="#105faa",document.getElementsByClassName("changebtn")[0].style.borderColor="#105faa",document.getElementsByClassName("exitbtn")[0].style.backgroundColor="#f56c6c",document.getElementsByClassName("exitbtn")[0].style.borderColor="#f56c6c",this.currentBiddedRow=e},TimeLeft:function(e){var t=e,i="",a="",d="";return t>=0?(i=Math.floor(t/60/60%24),a=Math.floor(t/60%60),d=Math.floor(t%60),t-=1,i<10&&(i="0"+i),a<10&&(a="0"+a),d<10&&(d="0"+d),i+":"+a+":"+d):"zero"}},mounted:function(){var e=this;void 0!==this.biddeddata&&setInterval(function(){for(var t=0;t<e.biddeddata.length;t++)e.biddeddata[t].sealedDiskTime=parseInt(e.biddeddata[t].sealedDiskTime),"zero"!==e.TimeLeft(e.biddeddata[t].sealedDiskTime)?(e.$set(e.biddeddata[t],"timeleft",e.TimeLeft(e.biddeddata[t].sealedDiskTime)),e.biddeddata[t].sealedDiskTime--):(e.biddeddata.splice(t,1),0===e.biddeddata.length&&e.$emit("handleToEmpty","true"))},1e3)}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bidded-bar"},[i("div",{staticClass:"do"},[i("div",{staticClass:"btn"},[i("el-button",{staticClass:"changebtn",attrs:{size:"mini"},on:{click:e.changePrice}},[e._v("修改")])],1),e._v(" "),i("div",{staticClass:"btn"},[i("el-button",{staticClass:"exitbtn",attrs:{type:"danger",size:"mini"},on:{click:e.exit}},[e._v("取消")])],1)]),e._v(" "),i("el-table",{staticClass:"bidded_table",attrs:{"max-height":"385","cell-class-name":e.tableCell,"empty-text":" ",data:e.biddeddata,"highlight-current-row":""},on:{"row-dblclick":e.handleCurrentChange,"current-change":e.biddedCurrentSelect}},[e._l(e.BiddedHeader,function(e,t){return i("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label,width:e.width,"show-overflow-tooltip":e.tooltip}})}),e._v(" "),i("el-table-column",{attrs:{label:"距竞拍结束还剩",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"el-icon-time"}),e._v(" "),i("span",[e._v(e._s(t.row.timeleft))])]}}])})],2)],1)},staticRenderFns:[]};var p=i("VU/8")(h,u,!1,function(e){i("2XEt")},"data-v-72179862",null).exports,b={data:function(){return{DetailHeader:[{prop:"goodsType",label:"商品名称",width:"160",tooltip:!0},{prop:"startArea",label:"起始地",width:"160",tooltip:!0},{prop:"endArea",label:"目的地",width:"160",tooltip:!0},{prop:"transportType",label:"类型",width:"120",tooltip:!1},{prop:"receivingTime",label:"时效(h)",width:"120",tooltip:!1},{prop:"goodsCount",label:"件数",width:"120",tooltip:!1},{prop:"weight",label:"总重量(kg)",width:"140",tooltip:!1},{prop:"volume",label:"总体积(m³)",width:"140",tooltip:!1},{prop:"remark",label:"备注",width:"160",tooltip:!0}]}},props:{detailOrder:String,detailNum:Number,detailData:Array}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"detail-bar"},[i("div",{staticClass:"detail-title"},[i("div",{staticClass:"detail-leader"},[e._v("当前位置： 任务单 / 详情")]),e._v(" "),i("div",{staticClass:"detail-total"},[e._v("\n      任务单号:\n      "),i("span",{staticClass:"detail-num"},[e._v(e._s(e.detailOrder))]),e._v("\n        共:\n      "),i("span",[e._v(e._s(e.detailNum))]),e._v("\n        条明细\n  ")])]),e._v(" "),i("el-table",{staticClass:"detail_table",attrs:{data:e.detailData}},e._l(e.DetailHeader,function(e,t){return i("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label,width:e.width,"show-overflow-tooltip":e.tooltip}})}))],1)},staticRenderFns:[]};var m=i("VU/8")(b,g,!1,function(e){i("ESBi")},"data-v-16bbccb0",null).exports,v={data:function(){return{page:1}},props:{total:Number},methods:{handleSizeChange:function(){this.$emit("handleToPage",this.page)},handleCurrentChange:function(){this.$emit("handleToPage",this.page)}}},f={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pick-data"},[i("el-pagination",{attrs:{"current-page":e.page,"page-size":10,layout:"prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.page=t}}})],1)},staticRenderFns:[]};var T=i("VU/8")(v,f,!1,function(e){i("Q+fM")},"data-v-e49a06b6",null).exports,k={name:"bidding",data:function(){return{pageCode:1,condition:{bidTaskId:"",pickArea:"",deliverArea:"",taskType:"",serviceTime:"",totalVolume:"",totalWeight:""},biddedtotal:0,biddingtotal:0,detailOrder:"",detailNum:0,detailData:[],biddingdata:[],biddeddata:[],activeName:"bidding"}},props:{refreshdata:Boolean},components:{SearchBar:n,BiddingBar:c,BiddedBar:p,DetailBar:m,PickData:T},watch:{refreshdata:"refreshData",activeName:"tabChange"},computed:d()({},Object(l.d)({userId:"userId"})),methods:{showDetail:function(e,t){this.activeName="detail",this.detailOrder=t,this.detailAjax(e)},changeBiddingPage:function(e){this.pageCode=e,this.biddingAjax(this.userId,this.pageCode,this.condition)},changeBiddedPage:function(e){this.pageCode=e,this.biddedAjax(this.userId,this.pageCode,this.condition)},searchBidding:function(e){this.condition=e,this.biddingAjax(this.userId,this.pageCode,this.condition)},searchBidded:function(e){this.condition=e,this.biddedAjax(this.userId,this.pageCode,this.condition)},biddingToEmpty:function(){this.pageCode=this.pageCode+1,this.biddingAjax(this.userId,this.pageCode,this.condition)},biddedToEmpty:function(){this.pageCode=this.pageCode+1,this.biddingAjax(this.userId,this.pageCode,this.condition)},handleToDoBidding:function(e,t){var i=this,a={userId:this.userId,bidTaskId:t,quotedPrice:e};this.$get("/api/auctionTask/auctionPrice",a).then(function(a){if(!a)return!1;for(var d=0;d<i.biddingdata.length;d++)i.biddingdata[d].bidTaskId===t&&(i.biddingdata.splice(d,1),0===i.biddingdata.length&&i.biddingToEmpty());i.$message({type:"success",message:"您已参与此单的竞价，你的报价是: "+e+"元"})})},handleTochangePrice:function(e,t){var i=this,a={userId:this.userId,bidTaskId:t,quotedPrice:e};this.$get("/api/auctionTask/auctionPrice",a).then(function(a){if(a){for(var d=0;d<i.biddeddata.length;d++)i.biddeddata[d].bidTaskId===t&&(i.biddeddata[d].quotedPrice=e);i.$message({type:"success",message:"修改成功，你修改后的报价是: "+e+"元"})}})},handleToExit:function(e){var t=this,i={userId:this.userId,bidTaskId:e};this.$get("/api/auctionTask/cancelBidding",i).then(function(i){if(!i)return!1;for(var a=0;a<t.biddeddata.length;a++)t.biddeddata[a].bidTaskId===e&&(t.biddeddata.splice(a,1),0===t.biddeddata.length&&t.biddedToEmpty());t.$message({type:"success",message:"你已取消此订单的竞拍!"})})},detailAjax:function(e){var t=this;this.$get("/api/auctionTask/getTaskDetails",{bidTaskId:e}).then(function(e){if(void 0===e)return!1;t.detailData=e,t.detailNum=e.length})},biddingAjax:function(e,t,i){var a=this,d={userId:e,pageCode:t,bidTaskId:i.bidTaskId,pickArea:i.pickArea,deliverArea:i.deliverArea,taskType:i.taskType,serviceTime:i.serviceTime,totalVolume:i.totalVolume,totalWeight:i.totalWeight};this.$get("/api/auctionTask/currentTask",d).then(function(e){if(void 0===e.rows)return!1;a.biddingdata=e.rows,a.biddingtotal=e.total})},biddedAjax:function(e,t,i){var a=this,d={userId:e,pageCode:t,bidTaskId:i.bidTaskId,pickArea:i.pickArea,deliverArea:i.deliverArea,taskType:i.taskType,serviceTime:i.serviceTime,totalVolume:i.totalVolume,totalWeight:i.totalWeight};this.$get("/api/auctionTask/findBidded",d).then(function(e){if(void 0===e.rows)return!1;a.biddeddata=e.rows,a.biddedtotal=e.total})},tabChange:function(){if("bidding"===this.activeName)this.biddingAjax(this.userId,this.pageCode,this.condition);else{if("bidded"!==this.activeName)return!1;this.biddedAjax(this.userId,this.pageCode,this.condition)}},refreshData:function(){if(!this.refreshdata)return!1;"bidding"===this.activeName?this.biddingAjax(this.userId,this.pageCode,this.condition):"bidded"===this.activeName?this.biddedAjax(this.userId,this.pageCode,this.condition):console.log("详情页面不刷新"),this.$emit("refreshed","done")}},mounted:function(){"未登录"===this.userId&&this.$router.push({path:"/login"}),this.biddingAjax(this.userId,this.pageCode,this.condition)}},C={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bidding"},[e._m(0),e._v(" "),i("div",{staticClass:"wrap"},[i("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"未竞价任务单",name:"bidding"}},[i("search-bar",{attrs:{activebar:e.activeName},on:{searchBidding:e.searchBidding}}),e._v(" "),i("bidding-bar",{attrs:{biddingdata:e.biddingdata},on:{handleToDetail:e.showDetail,handleToDoBidding:e.handleToDoBidding,handleToEmpty:e.biddingToEmpty}}),e._v(" "),i("pick-data",{attrs:{total:e.biddingtotal},on:{handleToPage:e.changeBiddingPage}})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"已竞价任务单",name:"bidded"}},[i("search-bar",{attrs:{activebar:e.activeName},on:{searchBidded:e.searchBidded}}),e._v(" "),i("bidded-bar",{attrs:{biddeddata:e.biddeddata},on:{handleToDetail:e.showDetail,handleTochangePrice:e.handleTochangePrice,handleToExit:e.handleToExit,handleToEmpty:e.biddedToEmpty}}),e._v(" "),i("pick-data",{attrs:{total:e.biddedtotal},on:{handleToPage:e.changeBiddedPage}})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"任务单详情",name:"detail",disabled:""}},[i("detail-bar",{attrs:{detailOrder:e.detailOrder,detailNum:e.detailNum,detailData:e.detailData}})],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[this._v("\n    当前页面:\n    "),t("span",[this._v("任务单竞价")])])}]};var w=i("VU/8")(k,C,!1,function(e){i("YQQe")},"data-v-3ff98e5d",null);t.default=w.exports}});